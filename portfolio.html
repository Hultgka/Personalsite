<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Portfolio ‚Äì Karissa</title>
  <meta name="description" content="Portfolio of Karissa. Modern, creative, and responsive web design projects.">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;400&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
  <style>
    /* ... your existing CSS ... */
    html, body { margin:0; padding:0; min-height:100vh; background:#1a2333;}
    body {
      font-family: 'Roboto', sans-serif;
      color: #fff;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
      background: #1a2333;
    }
    .paint-bg-img {
      position: fixed;
      z-index: 0;
      top: 0; left: 0; width: 100vw; height: 100vh;
      background: #1a2333 url('https://i.ibb.co/BVpk0KMn/pngtree-abstract-wallpaper-background-made-of-of-paint-splashes-image-15686388.jpg') no-repeat center center;
      background-size: cover;
      filter: blur(0px) brightness(0.65) saturate(1.25);
      pointer-events: none;
      transition: filter 0.5s;
    }
    .bg-overlay {
      position: fixed; z-index: 1; top: 0; left: 0; width: 100vw; height: 100vh;
      background: linear-gradient(120deg, rgba(15,22,38,0.72) 55%, rgba(32,40,80,0.28) 100%);
      pointer-events: none;
    }
    nav {
      z-index: 10;
      background: rgba(22, 27, 41, 0.93);
      box-shadow: 0 2px 22px #1117;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1.1rem 2.5vw 1.1rem 1.5vw;
      position: sticky;
      top:0;
      border-bottom: 2.3px solid #2b72ea;
    }
    .nav-left {
      display: flex;
      align-items: center;
      gap: 1.8rem;
    }
    .brand {
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      font-size: 1.45rem;
      color: #2b72ea;
      letter-spacing: 1.2px;
      display: flex;
      align-items: center;
      gap: 0.6rem;
    }
    .nav-links {
      display: flex;
      gap: 1.2rem;
      margin-left: 2.6rem;
    }
    .nav-links a {
      color: #fff;
      text-decoration: none;
      font-family: 'Montserrat', sans-serif;
      font-weight: 500;
      letter-spacing: 0.2px;
      font-size: 1.11rem;
      padding: 0.25rem 0.7rem;
      border-radius: 7px;
      transition: background 0.22s, color 0.17s;
      position: relative;
    }
    .nav-links a.active, .nav-links a:hover {
      background: #2b72ea;
      color: #fff;
    }
    .nav-admin {
      background: #232b4a;
      border-radius: 50%;
      padding: 0.37rem 0.47rem;
      margin-left: 1.1rem;
      color: #2b72ea;
      font-size: 1.12rem;
      border: 1.3px solid #2b72ea88;
      box-shadow: 0 3px 10px #2b72ea33;
      cursor: pointer;
      transition: background 0.18s, color 0.14s, box-shadow 0.14s;
      outline: none;
    }
    .nav-admin:hover, .nav-admin:focus {
      background: #2b72ea;
      color: #fff;
      box-shadow: 0 6px 20px #2b72ea44;
    }
    .nav-right {
      display: flex;
      align-items: center;
      gap: 1.2rem;
    }
    .lang-switch {
      display: flex;
      gap: 0.2rem;
      background: #232b4a;
      border-radius: 12px;
      box-shadow: 0 2px 10px #2b72ea11;
      padding: 0.25rem 0.55rem;
      margin-right: 0.7rem;
    }
    .lang-switch button {
      background: none;
      border: none;
      color: #2b72ea;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      padding: 0.19rem 0.57rem;
      border-radius: 6px;
      transition: background 0.17s, color 0.12s;
    }
    .lang-switch button.active, .lang-switch button:hover {
      background: #2b72ea;
      color: #fff;
    }
    @media (max-width: 650px) {
      nav { flex-direction: column; align-items: flex-start; gap: 0.7rem; }
      .nav-right { margin-top: 0.6rem; }
      .nav-links { margin-left: 0.3rem; flex-wrap: wrap; gap: 0.5rem; }
    }
    .portfolio-main-content {
      z-index: 2;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 70vh;
      padding-top: 6rem;
      padding-bottom: 3.5rem;
      justify-content: center;
    }
    .portfolio-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 2.6rem 2.1rem;
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
    }
    @media (max-width: 900px) {
      .portfolio-grid { grid-template-columns: 1fr; gap: 2rem 0.5rem; }
    }
    .portfolio-card {
      background: rgba(22,27,41,0.88);
      border-radius: 18px;
      box-shadow: 0 6px 32px #000a;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: transform 0.17s, box-shadow 0.2s;
      cursor: pointer;
      position: relative;
      min-height: 350px;
    }
    .portfolio-card:hover {
      transform: translateY(-5px) scale(1.025);
      box-shadow: 0 12px 36px #2b72ea33;
    }
    .portfolio-card-img {
      width: 100%;
      height: 215px;
      background: #232b4a;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .portfolio-card-img img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
      transition: transform 0.28s;
    }
    .portfolio-card:hover .portfolio-card-img img {
      transform: scale(1.07);
    }
    .portfolio-card-body {
      padding: 1.13rem 1.35rem 1.0rem 1.35rem;
      display: flex;
      flex-direction: column;
      flex: 1;
      justify-content: flex-start;
    }
    .portfolio-card-title {
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      font-size: 1.21rem;
      margin-bottom: 0.39rem;
      color: #2b72ea;
      letter-spacing: 0.5px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .portfolio-card-desc {
      font-size: 1.01rem;
      color: #e2e9ff;
      margin-bottom: 1.1rem;
      flex: 1;
      min-height: 44px;
    }
    .portfolio-card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.38rem;
      margin-bottom: 0.6rem;
    }
    .portfolio-tag {
      background: #2b72ea33;
      color: #2b72ea;
      border-radius: 7px;
      padding: 0.14rem 0.75rem;
      font-size: 0.91em;
      font-weight: 600;
      margin-right: 0.2em;
    }
    .portfolio-card-links {
      display: flex;
      gap: 1.1rem;
      margin-top: 0.5rem;
      align-items: center;
    }
    .portfolio-card-links a {
      color: #fff;
      text-decoration: none;
      background: #2b72ea;
      padding: 0.33rem 0.85rem;
      border-radius: 7px;
      font-size: 0.98rem;
      font-family: 'Montserrat', sans-serif;
      font-weight: 500;
      transition: background 0.18s, color 0.14s;
      display: flex; align-items: center; gap:0.45em;
    }
    .portfolio-card-links a:hover {
      background: #fff;
      color: #2b72ea;
    }
    .portfolio-card-links a.github {
      background: #232b4a;
      color: #2b72ea;
    }
    .portfolio-card-links a.github:hover {
      background: #fff;
      color: #111a;
    }
    .portfolio-card-morebtn {
      background: #e5a31a;
      color: #232b4a;
      border: none;
      border-radius: 7px;
      font-family: 'Montserrat', sans-serif;
      font-size: 0.98rem;
      font-weight: 600;
      padding: 0.36rem 1.15rem;
      box-shadow: 0 3px 12px #2b72ea22;
      cursor: pointer;
      margin-left: auto;
      margin-top: 0.5rem;
      transition: background 0.18s, color 0.14s;
    }
    .portfolio-card-morebtn:hover {
      background: #2b72ea;
      color: #fff;
    }
    .modal-backdrop {
      position: fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.65); z-index:9998;
      display: none; align-items: center; justify-content: center;
    }
    .modal-backdrop.active { display: flex; }
    .portfolio-modal {
      background: #202a3d;
      padding: 2rem 2rem 1.5rem 2rem;
      border-radius: 22px;
      box-shadow: 0 8px 48px #000d;
      min-width: 320px;
      max-width: 95vw;
      color: #fff;
      position: relative;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
      animation: fadeInModal 0.6s;
      max-height: 80vh;
      overflow-y: auto;
    }
    @keyframes fadeInModal {
      from { opacity: 0; transform: scale(0.85);}
      to   { opacity: 1; transform: scale(1);}
    }
    .portfolio-modal .close-modal {
      background: #232b4a; color: #ccc; padding: 0.33rem 0.9rem; border-radius: 7px; margin-left: auto; margin-bottom: 1rem;
      font-size:1.2rem; border: none; cursor: pointer;
      transition: background 0.16s, color 0.12s;
    }
    .portfolio-modal .close-modal:hover { background:#2b72ea; color:#fff;}
    .portfolio-modal-img {
      width: 100%; max-width: 380px;
      margin: 0 auto 1rem auto;
      border-radius: 17px;
      box-shadow: 0 3px 16px #2b72ea44;
      display: block;
      object-fit: cover;
    }
    .portfolio-modal-title {
      font-size: 1.27rem;
      font-family: 'Montserrat',sans-serif;
      font-weight: 700;
      color: #2b72ea;
      margin-bottom: 0.35em;
    }
    .portfolio-modal-desc {
      font-size: 1.09rem;
      color: #e2e9ff;
      line-height: 1.68;
      margin-bottom: 0.4em;
    }
    .portfolio-modal-tags {
      margin-bottom: 1.2em;
    }
    .portfolio-modal-links {
      display: flex;
      gap: 1.13em;
      margin-top: 0.7em;
      flex-wrap: wrap;
    }
    .portfolio-modal-links a {
      color: #fff;
      text-decoration: none;
      background: #2b72ea;
      padding: 0.39rem 1em;
      border-radius: 7px;
      font-size: 1.01rem;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap:0.48em;
      transition: background 0.18s, color 0.14s;
    }
    .portfolio-modal-links a.github {
      background: #232b4a;
      color: #2b72ea;
    }
    .portfolio-modal-links a:hover, .portfolio-modal-links a.github:hover {
      background: #fff;
      color: #2b72ea;
    }
    .admin-modal {
      background: #202a3d;
      padding: 2rem 2rem 1.5rem 2rem;
      border-radius: 22px;
      box-shadow: 0 8px 48px #000d;
      min-width: 320px;
      max-width: 95vw;
      color: #fff;
      position: relative;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
      animation: fadeInModal 0.6s;
      max-height: 80vh;
      overflow-y: auto;
    }
    .admin-modal h2 { font-family:'Montserrat',sans-serif; font-size:1.3rem; margin-top:0;}
    .admin-modal label { font-weight:500; margin-bottom:0.25rem; display:block;}
    .admin-modal input[type="file"] { margin-top:0.4rem;}
    .admin-modal input[type="text"], .admin-modal textarea, .admin-modal input[type="url"], .admin-modal select {
      width: 100%; border-radius: 7px; border: none; padding:0.6rem 0.8rem; font-size:1rem; margin-bottom:0.7rem;
      font-family:'Roboto',sans-serif; background:#22304e; color:#fff;
    }
    .admin-modal textarea {min-height: 60px;resize:vertical;}
    .admin-modal .admin-btn-row { display: flex; gap:1rem; margin-top:1rem;}
    .admin-modal button {
      font-family:'Montserrat',sans-serif; font-weight:600; font-size:1rem; border-radius:7px; border:none; padding:0.55rem 1.25rem; cursor:pointer;
      background:#2b72ea; color:#fff; box-shadow:0 2px 8px #2b72ea44; transition:background 0.14s;
    }
    .admin-modal button:hover { background:#e5a31a; color:#2b72ea;}
    .admin-modal .close-modal {
      background: #232b4a; color: #ccc; padding: 0.33rem 0.9rem; border-radius: 7px; margin-left: auto; margin-bottom: 1rem;
      font-size:1.2rem; border: none; cursor: pointer;
      transition: background 0.16s, color 0.12s;
    }
    .admin-modal .close-modal:hover { background:#2b72ea; color:#fff;}
    .admin-modal .admin-section {margin-bottom: 1.4rem;}
    .admin-modal .admin-section:last-child {margin-bottom: 0;}
    .admin-modal .admin-delete { background:#e23434 !important; color:#fff !important; margin-left:0.7rem;}
    .admin-project-list {margin:0.6rem 0 0.4rem 0; padding:0; list-style:none;}
    .admin-project-list li {margin-bottom:0.37rem; background:#22304e; border-radius:5px; padding:0.55rem 0.7rem;}
    .admin-project-list li span {font-weight:600;}
    .admin-lang-label {
      display: inline-block;
      font-size: 1.06em;
      font-weight: 600;
      background: #233059;
      color: #fff;
      border-radius: 7px;
      padding: 0.18em 0.75em;
      margin-right: 0.5em;
      margin-bottom: 0.4em;
    }
    .pw-modal { display:flex; flex-direction:column; align-items:center;}
    .pw-modal input[type="password"] {
      width: 200px; border-radius: 7px; border:none; padding:0.55rem 0.8rem; font-size:1rem; margin:1.1rem 0 0.7rem 0;
      font-family:'Roboto',sans-serif; background:#22304e; color:#fff;
    }
    .pw-modal .admin-btn-row {margin-top: 0;}
    .copyright-label {
      position: fixed;
      bottom: 0;
      right: 0;
      z-index: 110;
      color: #b3b3c6;
      font-size: 0.98rem;
      background: rgba(22,27,41,0.85);
      padding: 8px 18px 10px 24px;
      border-top-left-radius: 12px;
      box-shadow: 0 0 10px #0007;
      letter-spacing: 0.02em;
      user-select: none;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="paint-bg-img"></div>
  <div class="bg-overlay"></div>
  <nav>
    <div class="nav-left">
      <span class="brand"><i class="fa-solid fa-brush"></i> Karissa</span>
      <div class="nav-links">
        <a href="index.html" data-i18n="nav_home">Home</a>
        <a href="about.html" data-i18n="nav_about">About Me</a>
        <a href="portfolio.html" class="active" data-i18n="nav_portfolio">Portfolio</a>
        <a href="contact.html" data-i18n="nav_contact">Contact</a>
        <button class="nav-admin" id="admin-cog" title="Admin"><i class="fa fa-cog"></i></button>
      </div>
    </div>
    <div class="nav-right">
      <div class="lang-switch">
        <button data-lang="en" class="active">EN</button>
        <button data-lang="pl">PL</button>
        <button data-lang="es">ES</button>
        <button data-lang="ua">UA</button>
      </div>
    </div>
  </nav>
  <div class="portfolio-main-content">
    <div class="portfolio-grid" id="portfolio-grid"></div>
  </div>
  <div class="copyright-label">¬© Hultgka 2025</div>
  <div class="modal-backdrop" id="modal-backdrop">
    <div class="portfolio-modal" id="portfolio-modal" style="display:none"></div>
    <div class="admin-modal" id="admin-modal" style="display:none"></div>
  </div>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
    import { getFirestore, collection, doc, getDocs, setDoc, deleteDoc, addDoc } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

    document.addEventListener('DOMContentLoaded', function() {
      let currentLang = "en";
      let projects = [
        {
          id: "_demo_",
          imageUrl: "https://images.unsplash.com/photo-1461749280684-dccba630e2f6?auto=format&fit=crop&w=600&q=80",
          title_en: "Modern Portfolio Demo",
          title_pl: "Nowoczesne Portfolio Demo",
          title_es: "Portafolio Moderno Demo",
          title_ua: "–°—É—á–∞—Å–Ω–µ –ü–æ—Ä—Ç—Ñ–æ–ª—ñ–æ –î–µ–º–æ",
          shortDesc_en: "A sample project card with image, languages, and links.",
          shortDesc_pl: "Przyk≈Çadowa karta projektu z obrazem, jƒôzykami i linkami.",
          shortDesc_es: "Una tarjeta de proyecto de ejemplo con imagen, idiomas y enlaces.",
          shortDesc_ua: "–ó—Ä–∞–∑–∫–æ–≤–∞ –∫–∞—Ä—Ç–∫–∞ –ø—Ä–æ–µ–∫—Ç—É –∑ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º, –º–æ–≤–∞–º–∏ —Ç–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏.",
          fullDesc_en: "This is a demo project entry, showing how your portfolio cards will look. You can edit, delete, or add your own real projects via the admin panel (click the cog in the navbar).",
          fullDesc_pl: "To jest przyk≈Çadowy wpis projektu, pokazujƒÖcy, jak bƒôdƒÖ wyglƒÖdaƒá Twoje karty portfolio. Mo≈ºesz edytowaƒá, usuwaƒá lub dodaƒá w≈Çasne projekty przez panel admina (ikona zƒôbatki).",
          fullDesc_es: "Este es un proyecto de demostraci√≥n que muestra c√≥mo se ver√°n tus tarjetas de portafolio. Puedes editar, eliminar o agregar tus propios proyectos desde el panel de administraci√≥n (icono de engranaje).",
          fullDesc_ua: "–¶–µ –¥–µ–º–æ-–ø—Ä–æ–µ–∫—Ç, —è–∫–∏–π –ø–æ–∫–∞–∑—É—î, —è–∫ –≤–∏–≥–ª—è–¥–∞—Ç–∏–º—É—Ç—å –≤–∞—à—ñ –∫–∞—Ä—Ç–∫–∏ –ø–æ—Ä—Ç—Ñ–æ–ª—ñ–æ. –í–∏ –º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏, –≤–∏–¥–∞–ª—è—Ç–∏ –∞–±–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –ø—Ä–æ–µ–∫—Ç–∏ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–∑–Ω–∞—á–æ–∫ —à–µ—Å—Ç–µ—Ä–Ω—ñ).",
          siteUrl: "https://example.com/",
          githubUrl: "https://github.com/",
          tags: ["HTML", "CSS", "Demo", "Responsive"]
        }
      ];
      let modalBackdrop = document.getElementById('modal-backdrop');
      let portfolioModal = document.getElementById('portfolio-modal');
      let adminModal = document.getElementById('admin-modal');
      let adminPassword = "BultgrenA!";
      let isAdmin = false;
      const firebaseConfig = {
        apiKey: "AIzaSyBTI1OAozQfC_7RWblZ3qtiP03y0O4hOpc",
        authDomain: "karissa-s-portfolio.firebaseapp.com",
        projectId: "karissa-s-portfolio",
        storageBucket: "karissa-s-portfolio.appspot.com",
        messagingSenderId: "91280590936",
        appId: "1:91280590936:web:13b904b7843a97e221622d"
      };
      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);
      const translations = {
        en: { nav_home: "Home", nav_about: "About Me", nav_portfolio: "Portfolio", nav_contact: "Contact", view_more: "View More", live_site: "Live Site", github: "GitHub" },
        pl: { nav_home: "Start", nav_about: "O mnie", nav_portfolio: "Portfolio", nav_contact: "Kontakt", view_more: "Zobacz wiƒôcej", live_site: "Strona", github: "GitHub" },
        es: { nav_home: "Inicio", nav_about: "Sobre m√≠", nav_portfolio: "Portafolio", nav_contact: "Contacto", view_more: "Ver m√°s", live_site: "Sitio web", github: "GitHub" },
        ua: { nav_home: "–ì–æ–ª–æ–≤–Ω–∞", nav_about: "–ü—Ä–æ –º–µ–Ω–µ", nav_portfolio: "–ü–æ—Ä—Ç—Ñ–æ–ª—ñ–æ", nav_contact: "–ö–æ–Ω—Ç–∞–∫—Ç", view_more: "–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ", live_site: "–°–∞–π—Ç", github: "GitHub" }
      };
      function t(key) {
        return translations[currentLang][key] || translations["en"][key] || key;
      }
      function setLang(lang) {
        currentLang = lang;
        document.querySelectorAll("[data-i18n]").forEach(el => {
          const key = el.getAttribute("data-i18n");
          let val = translations[lang][key];
          if (val) el.textContent = val;
        });
        document.querySelectorAll(".lang-switch button").forEach(btn=>{
          btn.classList.toggle("active", btn.getAttribute("data-lang")===lang);
        });
        renderPortfolioGrid();
      }
      document.querySelectorAll(".lang-switch button").forEach(btn=>{
        btn.onclick = ()=>setLang(btn.getAttribute("data-lang"));
      });
      function renderPortfolioGrid() {
        const grid = document.getElementById('portfolio-grid');
        grid.innerHTML = '';
        let toShow = projects; // <-- DEMO project is now included!
        toShow.forEach((proj, idx) => {
          let langSuffix = "_" + currentLang;
          function getField(f) {
            return proj[f+langSuffix] || proj[f+"_en"] || "";
          }
          let tagsHtml = (proj.tags || []).map(tag => `<span class="portfolio-tag">${tag}</span>`).join('');
          let imgUrl = proj.imageUrl || 'https://placehold.co/400x300?text=No+Image';
          let card = document.createElement('div');
          card.className = 'portfolio-card';
          card.innerHTML = `
            <div class="portfolio-card-img"><img src="${imgUrl}" alt="Project Image"></div>
            <div class="portfolio-card-body">
              <div class="portfolio-card-title">${getField("title")}</div>
              <div class="portfolio-card-desc">${getField("shortDesc")}</div>
              <div class="portfolio-card-tags">${tagsHtml}</div>
              <div class="portfolio-card-links">
                ${proj.siteUrl ? `<a href="${proj.siteUrl}" target="_blank" rel="noopener"><i class="fa fa-globe"></i> ${t('live_site')}</a>` : ""}
                ${proj.githubUrl ? `<a class="github" href="${proj.githubUrl}" target="_blank" rel="noopener"><i class="fab fa-github"></i> ${t('github')}</a>` : ""}
              </div>
              <button class="portfolio-card-morebtn" data-idx="${projects.findIndex(p=>p.id === proj.id)}">${t('view_more')}</button>
            </div>
          `;
          card.querySelector('.portfolio-card-morebtn').onclick = (e) => {
            e.stopPropagation();
            showPortfolioModal(projects.findIndex(p=>p.id === proj.id), projects);
          };
          card.onclick = (e) => {
            if (!e.target.classList.contains('portfolio-card-morebtn')) showPortfolioModal(projects.findIndex(p=>p.id === proj.id), projects);
          };
          grid.appendChild(card);
        });
      }
      function showPortfolioModal(idx, arr = projects) {
        const proj = arr[idx];
        let langSuffix = "_" + currentLang;
        function getField(f) {
          return proj[f+langSuffix] || proj[f+"_en"] || "";
        }
        let tagsHtml = (proj.tags || []).map(tag => `<span class="portfolio-tag">${tag}</span>`).join('');
        let imgUrl = proj.imageUrl || 'https://placehold.co/400x300?text=No+Image';
        portfolioModal.innerHTML = `
          <button class="close-modal" title="Close">&times;</button>
          <img class="portfolio-modal-img" src="${imgUrl}" alt="Project Image"/>
          <div class="portfolio-modal-title">${getField("title")}</div>
          <div class="portfolio-modal-tags">${tagsHtml}</div>
          <div class="portfolio-modal-desc">${getField("fullDesc")}</div>
          <div class="portfolio-modal-links">
            ${proj.siteUrl ? `<a href="${proj.siteUrl}" target="_blank" rel="noopener"><i class="fa fa-globe"></i> ${t('live_site')}</a>` : ""}
            ${proj.githubUrl ? `<a class="github" href="${proj.githubUrl}" target="_blank" rel="noopener"><i class="fab fa-github"></i> ${t('github')}</a>` : ""}
          </div>
        `;
        portfolioModal.style.display = '';
        adminModal.style.display = 'none';
        modalBackdrop.classList.add('active');
        portfolioModal.querySelector('.close-modal').onclick = closeModal;
      }
      function closeModal() {
        modalBackdrop.classList.remove('active');
        setTimeout(() => {
          portfolioModal.style.display = 'none';
          adminModal.style.display = 'none';
        }, 300);
      }
      modalBackdrop.onclick = function(e) {
        if (e.target === modalBackdrop) closeModal();
      };
      document.getElementById('admin-cog').onclick = function() {
        showModal(`
          <div class="pw-modal">
            <h2>Admin Access</h2>
            <input type="password" id="pw-input" placeholder="Password" autocomplete="current-password"/>
            <div class="admin-btn-row">
              <button id="pw-submit">Enter</button>
              <button class="close-modal">Close</button>
            </div>
            <div id="pw-error" style="color:#e23434; margin-top:0.7rem;"></div>
          </div>
        `, 'admin');
        adminModal.querySelector('.close-modal').onclick = closeModal;
        adminModal.querySelector('#pw-submit').onclick = function() {
          const pw = adminModal.querySelector('#pw-input').value;
          if (pw === adminPassword) {
            isAdmin = true;
            showAdminPanel();
          } else {
            adminModal.querySelector('#pw-error').textContent = "Incorrect password.";
          }
        };
        adminModal.querySelector('#pw-input').onkeydown = function(e) {
          if (e.key === 'Enter') adminModal.querySelector('#pw-submit').click();
        };
        setTimeout(()=>adminModal.querySelector('#pw-input').focus(),100);
      };
      const langNames = { en: "English", pl: "Polish", es: "Spanish", ua: "Ukrainian" };
      async function translateText(text, targetLang) {
        if (!text) return "";
        try {
          let resp = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=${targetLang}&dt=t&q=`+encodeURIComponent(text));
          let json = await resp.json();
          return json[0].map(a=>a[0]).join("");
        } catch (e) {
          return text;
        }
      }
      async function showAdminPanel() {
        await loadProjects();

        function renderAdminPanel(editIdx) {
          if (editIdx === undefined) {
            // Project list view - now includes DEMO project!
            let projectsList = projects.map((proj) => {
              let idx = projects.findIndex(p => p.id === proj.id);
              let title = proj.title_en || proj.title_pl || proj.title_es || proj.title_ua || "Untitled";
              return `<li>
                <span>${title}</span>
                <button class="admin-delete" data-id="${proj.id}" title="Delete">üóë</button>
                <button data-idx="${idx}" class="edit-btn" title="Edit">‚úèÔ∏è</button>
              </li>`;
            }).join('');
            showModal(`
              <button class="close-modal" title="Close">&times;</button>
              <h2>Manage Portfolio Projects</h2>
              <ul class="admin-project-list">${projectsList}</ul>
              <button id="add-project">Add Project</button>
            `, 'admin');
            adminModal.querySelector('.close-modal').onclick = closeModal;
            adminModal.querySelectorAll('.admin-delete').forEach(btn => {
              btn.onclick = async () => {
                const projectId = btn.getAttribute("data-id");
                if (confirm("Delete this project?")) {
                  try {
                    await deleteDoc(doc(db,"portfolioProjects", projectId));
                    await loadProjects();
                    renderAdminPanel();
                  } catch (err) {
                    alert("Delete failed: " + err.message);
                  }
                }
              };
            });
            adminModal.querySelectorAll('.edit-btn').forEach(btn => {
              btn.onclick = () => {
                const idx = parseInt(btn.getAttribute("data-idx"), 10);
                renderAdminPanel(idx);
              };
            });
            adminModal.querySelector('#add-project').onclick = () => {
              renderAdminPanel(-1);
            };
          } else {
            // Add/Edit form
            let proj = editIdx === -1 ? {} : { ...projects[editIdx] };
            let isEdit = editIdx !== -1;
            let langFields = '';
            ["en", "pl", "es", "ua"].forEach(l => {
              const label = `<span class="admin-lang-label">${langNames[l]}</span>`;
              langFields += `<div style="display:flex;gap:1em;align-items:flex-start;">
                <div style="flex:1 1 0;">
                  ${label}
                  <input type="text" placeholder="Title" data-field="title_${l}" value="${proj["title_"+l]||""}">
                  <textarea placeholder="Short Description" data-field="shortDesc_${l}">${proj["shortDesc_"+l]||""}</textarea>
                  <textarea placeholder="Full Description" data-field="fullDesc_${l}">${proj["fullDesc_"+l]||""}</textarea>
                </div>
              </div>`;
            });
            showModal(`
              <button class="close-modal" title="Close">&times;</button>
              <h2>${isEdit ? "Edit Project" : "Add Project"}</h2>
              <div class="admin-section">
                <label>Project Image (Paste direct URL, e.g. https://imgur.com/xyz.png)</label>
                <div style="display:flex;align-items:center;gap:1rem;">
                  <div class="portfolio-card-img" style="width:140px;height:100px;">
                    <img src="${proj.imageUrl||'https://placehold.co/400x300?text=No+Image'}" id="admin-project-img" style="width:100%;height:100%;object-fit:cover;border-radius:12px;"/>
                  </div>
                  <input type="text" id="img-url-input" placeholder="Paste image URL" value="${proj.imageUrl||""}" style="width:300px;">
                </div>
              </div>
              <div class="admin-section">
                <label>Multi-Language Fields</label>
                ${langFields}
              </div>
              <div class="admin-section">
                <label>Live Site Link</label>
                <input type="url" data-field="siteUrl" value="${proj.siteUrl||""}" placeholder="https://yoursite.com">
                <label>GitHub Repository Link</label>
                <input type="url" data-field="githubUrl" value="${proj.githubUrl||""}" placeholder="https://github.com/yourrepo">
                <label>Tags/Technologies (comma-separated)</label>
                <input type="text" data-field="tags" value="${(proj.tags||[]).join(',')}" placeholder="React, Web Design, CSS">
              </div>
              <div class="admin-btn-row">
                <button id="save-admin">${isEdit ? "Save Changes" : "Add Project"}</button>
                <button class="close-modal">Cancel</button>
              </div>
            `, 'admin');
            adminModal.querySelector('.close-modal').onclick = () => renderAdminPanel();
            adminModal.querySelector('#img-url-input').oninput = function(e) {
              const url = e.target.value;
              proj.imageUrl = url;
              adminModal.querySelector('#admin-project-img').src = url || 'https://placehold.co/400x300?text=No+Image';
            };
            adminModal.querySelector('#save-admin').onclick = async function() {
              adminModal.querySelectorAll('[data-field]').forEach(el => {
                let f = el.getAttribute('data-field');
                if (f.startsWith('tags')) {
                  proj.tags = el.value.split(',').map(s=>s.trim()).filter(Boolean);
                } else {
                  proj[f] = el.value;
                }
              });
              proj.imageUrl = adminModal.querySelector('#img-url-input').value || '';
              const fields = ["title", "shortDesc", "fullDesc"];
              for (let field of fields) {
                const enVal = proj[field+"_en"] || "";
                for (let lang of ["pl", "es", "ua"]) {
                  let key = field + "_" + lang;
                  if ((!proj[key] || proj[key].trim() === "") && enVal) {
                    proj[key] = await translateText(enVal, lang);
                  }
                }
              }
              if (!proj.imageUrl) proj.imageUrl = "https://placehold.co/400x300?text=No+Image";
              try {
                if (isEdit) {
                  await setDoc(doc(db,"portfolioProjects",proj.id), proj);
                } else {
                  let docRef = await addDoc(collection(db,"portfolioProjects"), proj);
                  proj.id = docRef.id;
                }
                await loadProjects();
                renderAdminPanel();
              } catch (err) {
                alert("Save failed: " + err.message);
              }
            };
          }
        }
        renderAdminPanel();
        adminModal.style.display = '';
        portfolioModal.style.display = 'none';
        modalBackdrop.classList.add('active');
      }
      function showModal(html, which='portfolio') {
        if (which === 'portfolio') {
          portfolioModal.innerHTML = html;
          portfolioModal.style.display = '';
          adminModal.style.display = 'none';
        } else {
          adminModal.innerHTML = html;
          adminModal.style.display = '';
          portfolioModal.style.display = 'none';
        }
        modalBackdrop.classList.add('active');
      }
      async function loadProjects() {
        const snap = await getDocs(collection(db, "portfolioProjects"));
        let loaded = [];
        snap.forEach(doc => {
          let d = doc.data();
          d.id = doc.id;
          loaded.push(d);
        });
        projects = loaded.length ? loaded : projects; // demo if none in Firestore
        renderPortfolioGrid();
      }
      loadProjects();
    });
  </script>
</body>
</html>